# JAZZSTOCK_BOT

* jazzstock.net / jazztronomers@gmail.com / blog.naver.com/rubenchu 

1) 본 Repository는 실시간 주가를 크롤링하여, 조건에 부합하는경우 Rest API로 Application Server로 메세지를 전달하여, 최종적으로는 소스코드 레벨의 조건매매를 진행하기 위함입니다.

2) 본 Repository는 JAZZSTOCK 개발DB연동이 필수조건으로, DB접속계정 발급관련 문의는 이메일로 보내주세요, Standalone 버전은 귀찮아서 아직은 만들 생각없습니다



## 사용법:

0) 기본적으로 python3.6.9를 사용한다.
1) requirements.txt에 있는 패키지들을 설치한다.
2) config/config_template.py 에 본인의 db접속정보를 입력하고, config.py 로 renaming한다.
3) main_crawlnaver_debug.py 를 실행해보고 대충 어떤 느낌인지 파악한다
4) 로직을 추가구현하여 실시간 알람봇으로 사용할때는 main_crawlnaver_run.py를 사용한다, 장전에 실행되도록 예약을 걸어두면 좋을듯하다.



## 계획 :

1) IP주소당 실시간으로 커버가능한 종목수를 N 이라 하고.
2) EC2 TINY인스턴스를 M 개 실행한다 치면 N*M개의 실시간 주가정보를 얻을 수 있게 된다
3) 이를 취합하는 FLASK SERVER를 구성하여, ALERTING에서 나아가서 조건매매까지 연동해볼 생각이다.
4) 증권사 API를 사용하지 않고 이렇게 크롤링을 하는 이유는 ? 
    증권사 API는 주민번호당 한계정 고정이라서 Scaling이 불가능하다 (키움증권 기준 5request/1min, 1000request/hour)

...더이상의 자세한 설명은 생략한다.
    


## 실행샘플 :<pre>

main_crawlnaver_debug.py 를 실행결과 예시:


root@rubenchu:~/git/workspace/jazzstock# python3 main_crawlnaver_debug.py 079940 093320 035420 035720 131370

['079940', '093320', '035420', '035720', '131370']
 * 카카오(035720)의 120일치 5분봉데이터를 DB에서 조회해왔습니다
 * 케이아이엔엑스(093320)의 120일치 5분봉데이터를 DB에서 조회해왔습니다
 * 가비아(079940)의 120일치 5분봉데이터를 DB에서 조회해왔습니다
 * NAVER(035420)의 120일치 5분봉데이터를 DB에서 조회해왔습니다
 * 알서포트(131370)의 120일치 5분봉데이터를 DB에서 조회해왔습니다
----------------------------------------------------------------------------------------------------
전거래일 일봉기준 주가 및 지표 :
    STOCKNAME   CLOSE    BBP    BBW      K      D      J    VOLUME VOLUME_25    VOLUME_75      RSI
236       카카오  263500  0.613   0.09  0.688  0.587  0.587    910225    335038       877971  49.6183
235   케이아이엔엑스   59100  0.372   0.09    0.3  0.403  0.464     35441   29830.5      74966.5  43.2203
235       가비아   14050  0.346  0.223  0.543  0.294    0.2    459101   31456.5       326096  36.5854
236     NAVER  249500  0.886  0.124  0.845  0.725  0.685    913325    310500       770800  57.8616
236      알서포트    7530  0.819  0.397  0.585  0.747  0.539  13758005    495361  5.18762e+06  59.8592
----------------------------------------------------------------------------------------------------

종목명 / 시초가 / 시간 / 전일종가대비 변동 / 일자 / 근거5분봉 / BBP / BBW / K / D / J 
카카오      260500 090000   262000 1500 |       20200622        090000  0.216   0.005   0.000   0.650   0.750
케이아이엔엑스   58900 090000    59000  100 |   20200622        090000  0.586   0.007   0.429   0.686   0.818
가비아       13950 090000    14000   50 |       20200622        090000  0.212   0.006   0.000   0.300   0.420
NAVER    249500 090000   250000  500 |  20200622        090000  1.102   0.011   1.000   0.833   0.820
알서포트       7330 090000     7430  100 |      20200622        090000  0.294   0.023   0.360   0.599   0.482


  sleep 30 seconds ....


종목명 / 시초가 / 시간 / 전일종가대비 변동 / 일자 / 근거5분봉 / BBP / BBW / K / D / J 
카카오      260500 090100   261000 2500 |       20200622        090000  -0.073  0.006   0.000   0.650   0.750
케이아이엔엑스   58900 090100    58900  200 |   20200622        090000  0.469   0.007   0.286   0.657   0.812
가비아       13950 090100    13900  150 |       20200622        090000  -0.185  0.007   0.000   0.300   0.420
NAVER    249500 090100   249500    0 |  20200622        090000  1.035   0.010   0.889   0.811   0.816
알서포트       7330 090100     7510   20 |      20200622        090000  0.515   0.023   0.680   0.663   0.495


  sleep 30 seconds ....


</pre>


#### 이상.